<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Society Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* Minimal CSS â€“ focus on structure only */
body{
    margin:0;
    font-family:Arial, Helvetica, sans-serif;
    background:#f3f4f6;
}

.container{
    padding:15px;
}

.section{
    background:#ffffff;
    border:1px solid #ddd;
    padding:15px;
    margin-bottom:15px;
}

.section h3{
    margin-top:0;
    font-size:16px;
}

.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
    gap:10px;
}

input{
    width:100%;
    padding:8px;
}

.value{
    font-weight:bold;
    margin-top:5px;
}

.hidden{
    display:none;
}
</style>
</head>

<body>

<!-- ================= SESSION CHECK ================= -->
<script>
if(sessionStorage.getItem("loggedIn") !== "true"){
    window.location.href = "login.html";
}
</script>

<!-- ================= HEADER ================= -->
<div id="header"></div>

<!-- ================= PAGE CONTENT ================= -->
<div class="container">

    <!-- ========== SEARCH SECTION ========== -->
    <div class="section">
        <h3>Member Search</h3>

        <input
            type="text"
            id="memberSearch"
            placeholder="Search by Gen No / T No / Name"
            onkeyup="searchMember()"
        >

        <!-- Autosuggest results will appear here -->
        <div id="searchResults"></div>
    </div>

    <!-- ========== DASHBOARD SECTION ========== -->
    <div class="section">
        <h3>Dashboard</h3>

        <div class="grid">

            <div>
                Total Active Members
                <div class="value" id="totalActiveMembers"></div>
            </div>

            <div>
                Next Month Retirement
                <div class="value" id="nextMonthRetire"></div>
            </div>

            <div>
                Total CD
                <div class="value" id="totalCD"></div>
            </div>

            <div>
                Total Shares
                <div class="value" id="totalShares"></div>
            </div>

            <div>
                Active Short Loans
                <div class="value" id="activeShortLoan"></div>
            </div>

            <div>
                Active Long Loans
                <div class="value" id="activeLongLoan"></div>
            </div>

            <div>
                Total Loans Given
                <div class="value" id="totalLoansGiven"></div>
            </div>

            <div>
                Total FD (Count / Amount)
                <div class="value" id="totalFD"></div>
            </div>

        </div>
    </div>

</div>

<!-- ================= JS ================= -->
<script>
/* ---------- LOAD HEADER ---------- */
fetch("header.html")
    .then(res => res.text())
    .then(html => {
        document.getElementById("header").innerHTML = html;
    });

/* ---------- SEARCH (STRUCTURE ONLY) ---------- */
function searchMember(){
    let q = document.getElementById("memberSearch").value.trim();

    if(q.length < 2){
        document.getElementById("searchResults").innerHTML = "";
        return;
    }

    // Backend autosuggest logic will be added later
    document.getElementById("searchResults").innerHTML =
        "<small>Searching for: <b>" + q + "</b></small>";
}

/* ---------- DASHBOARD DATA ---------- */
/*
Backend (Python + SQLite) will:
- Fetch all counts
- Populate IDs below
- No frontend calculation
*/
</script>

</body>
</html>